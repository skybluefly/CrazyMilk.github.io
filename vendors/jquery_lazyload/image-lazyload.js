var ImageLazyload=(function(e,c){var k=0;var g=[];var f={offset:0,container:document.body,callback:null};var j=function(t){t=e(t);var s=f.offset?0:60;var E={};try{E=t.offset()}catch(F){E={left:0,top:0}}var p=e(window).scrollTop();var A=e(window).scrollLeft();var x=e(window).width();var v=e(window).height();var m=t[0].offsetHeight==1?t.parent()[0].offsetHeight:t[0].offsetHeight;var y=t[0].offsetWidth==1?t.parent()[0].offsetWidth:t[0].offsetWidth;var D,C,B,z,r,q,o,n,u,w,G,H;D=z=E.left;r=q=E.top;C=B=E.left+y;o=n=E.top+m;u=A-s;G=p-s;w=A+x+s;H=p+v+s;return(u<=D&&D<=w&&G<=r&&r<=H)||(u<=C&&C<=w&&G<=q&&q<=H)||(u<=B&&B<=w&&G<=o&&o<=H)||(u<=z&&z<=w&&G<=n&&n<=H)};var b=function(m){return(m.attr("data-loaded")=="1")};var h=function(n){n=e(n);if(b(n)){return}if(n.attr("data-loadfunc")!="1"){n.attr("data-loadfunc",1);n.ready(function(o){var p=e(this);p.attr("data-loaded",1);if(f.callback&&typeof f.callback==="function"){f.callback(n)}})}var m=n.attr("data-src")||"";if(m.indexOf("http")>-1){n.attr("src",m);n[0].removeAttribute("data-src")}};var a=function(){e.each(g,function(n,o){o=e(o);if(!b(o)&&j(o)){h(o)}});var m=[];e.each(g,function(n,o){o=e(o);if(!b(o)){m.push(o)}});g=m};var l=function(){var o=e(f.container);var m=false;if(o.is(document.body)){m=true}var n=[];e.each(e("img[data-src]",o),function(p,q){q=e(q);if(!b(q)){n.push(q)}});if(m){g=n}else{g=g.concat(n)}a()};var d=function(){e.each(["resize","scroll","ready"],function(m,n){e(window).bind(n,function(o){if(k){window.clearTimeout(k)}k=window.setTimeout(function(){k=0;l()},20);o.stopPropagation()})})};var i=function(m){f=e.extend(f,m);l();d()};return{init:i,visible:j,load:h}})(jQuery);
